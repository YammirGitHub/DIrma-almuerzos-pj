{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/yammir/Documents/Yammir/DOCUMENTOSSSS%20ANTES%20DE%20LA%20ACRTUALIZACION/WEB%C2%B4S/d-irma/src/app/pedido/%5Bid%5D/page.tsx"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\nimport { cookies } from \"next/headers\";\nimport { CheckCircle2, MessageCircle, MapPin, Clock } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { redirect } from \"next/navigation\";\n\nexport default async function OrderSuccessPage({\n  params,\n}: {\n  params: { id: string };\n}) {\n  const { id } = await params; // Next.js 15 requiere await en params\n  const cookieStore = await cookies();\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll();\n        },\n      },\n    },\n  );\n\n  // 1. Buscamos el pedido\n  const { data: order } = await supabase\n    .from(\"orders\")\n    .select(\"*\")\n    .eq(\"id\", id)\n    .single();\n\n  if (!order) {\n    redirect(\"/\"); // Si no existe, volver al inicio\n  }\n\n  // 2. Generamos el mensaje de WhatsApp\n  const whatsappMessage =\n    `Hola D'Irma! üë©‚Äçüç≥ Acabo de hacer el pedido *#${order.id.slice(0, 4)}* por la web.%0A%0A` +\n    `üìã *Mi Pedido:*%0A${order.items.map((i: any) => `- ${i.qty}x ${i.name}`).join(\"%0A\")}%0A%0A` +\n    `üí∞ *Total:* S/ ${order.total_amount}%0A` +\n    `üìç *Oficina:* ${order.customer_office}%0A` +\n    `üì± *Pago:* ${order.payment_method === \"yape\" ? \"Yape (Verificando)\" : `Efectivo (Vuelto para S/ ${order.total_amount + (order.cash_change_amount || 0)})`}`;\n\n  return (\n    <main className=\"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4\">\n      <div className=\"w-full max-w-md bg-white rounded-[2.5rem] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-500\">\n        {/* CABECERA VERDE */}\n        <div className=\"bg-green-500 p-8 text-center text-white relative overflow-hidden\">\n          <div className=\"absolute inset-0 bg-white/10 opacity-50 pattern-dots\"></div>\n          <div className=\"relative z-10 flex flex-col items-center\">\n            <div className=\"bg-white text-green-500 p-3 rounded-full shadow-lg mb-4\">\n              <CheckCircle2 size={48} strokeWidth={3} />\n            </div>\n            <h1 className=\"text-3xl font-black tracking-tight\">\n              ¬°Pedido Recibido!\n            </h1>\n            <p className=\"text-green-100 font-medium mt-1\">\n              La cocina ya est√° notificada\n            </p>\n          </div>\n        </div>\n\n        {/* CUERPO DEL TICKET */}\n        <div className=\"p-8 space-y-6\">\n          {/* Detalles de Entrega */}\n          <div className=\"flex items-start gap-4 p-4 bg-gray-50 rounded-2xl border border-gray-100\">\n            <div className=\"bg-white p-2 rounded-xl shadow-sm text-gray-400\">\n              <MapPin size={20} />\n            </div>\n            <div>\n              <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest\">\n                Entregar en\n              </p>\n              <p className=\"text-gray-900 font-bold text-lg leading-tight\">\n                {order.customer_office}\n              </p>\n              <p className=\"text-gray-500 text-sm\">{order.customer_name}</p>\n            </div>\n          </div>\n\n          {/* Resumen de Items */}\n          <div className=\"space-y-3\">\n            <h3 className=\"text-xs font-black text-gray-900 uppercase tracking-widest border-b border-gray-100 pb-2\">\n              Resumen\n            </h3>\n            {order.items.map((item: any, i: number) => (\n              <div key={i} className=\"flex justify-between text-sm\">\n                <span className=\"text-gray-600 font-medium\">\n                  <strong className=\"text-black\">{item.qty}x</strong>{\" \"}\n                  {item.name}\n                </span>\n                <span className=\"text-gray-900 font-bold\">\n                  S/ {(item.price * item.qty).toFixed(2)}\n                </span>\n              </div>\n            ))}\n            <div className=\"flex justify-between items-center pt-2 border-t border-gray-100 mt-2\">\n              <span className=\"font-black text-xl\">Total</span>\n              <span className=\"font-black text-2xl text-green-600\">\n                S/ {order.total_amount}\n              </span>\n            </div>\n          </div>\n\n          {/* BOT√ìN WHATSAPP (Vital para UX) */}\n          <a\n            href={`https://wa.me/51974805994?text=${whatsappMessage}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"block w-full bg-[#25D366] text-white font-bold py-4 rounded-2xl text-center shadow-lg shadow-green-200 hover:bg-[#20bd5a] transition-transform active:scale-95 flex items-center justify-center gap-2\"\n          >\n            <MessageCircle\n              size={24}\n              fill=\"white\"\n              className=\"text-transparent\"\n            />\n            Confirmar por WhatsApp\n          </a>\n\n          <Link\n            href=\"/\"\n            className=\"block text-center text-gray-400 font-bold text-sm hover:text-gray-600 transition-colors\"\n          >\n            Volver al Men√∫\n          </Link>\n        </div>\n      </div>\n\n      <p className=\"mt-8 text-gray-400 text-xs font-medium text-center max-w-xs\">\n        <Clock size={12} className=\"inline mr-1\" />\n        Tiempo estimado de entrega: 12:30 PM - 1:30 PM\n      </p>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}