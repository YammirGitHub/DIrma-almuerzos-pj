(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{574:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Q});var s=a(5155),l=a(2115),r=a(6622),i=a(3321),n=a(8751),o=a(642),d=a(2806);let c=(0,d.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var x=a(8822),m=a(2651),p=a(3210),u=a(6296),h=a(9722),g=a(622);function b(...e){return(0,g.QP)((0,h.$)(e))}function f({isOpen:e,title:t,message:a,onConfirm:l,onCancel:r,isLoading:i=!1,type:d="danger"}){let h={danger:{iconBg:"bg-red-50 text-red-500",button:"bg-red-600 hover:bg-red-700 shadow-red-500/20 text-white",icon:c},info:{iconBg:"bg-blue-50 text-blue-500",button:"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20 text-white",icon:x.A},success:{iconBg:"bg-emerald-50 text-emerald-600",button:"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-500/20 text-white",icon:m.A}},g=h[d]||h.danger,f=g.icon;return(0,s.jsx)(o.N,{children:e&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 isolate",children:[(0,s.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:i?void 0:r}),(0,s.jsxs)(n.P.div,{role:"alertdialog",initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-white w-full max-w-[320px] rounded-[2rem] p-6 shadow-2xl shadow-black/10 ring-1 ring-black/5 overflow-hidden text-center",children:[(0,s.jsx)("button",{onClick:r,disabled:i,className:"absolute top-4 right-4 p-2 text-slate-300 hover:text-slate-500 hover:bg-slate-50 rounded-full transition-colors disabled:opacity-0",children:(0,s.jsx)(p.A,{size:20})}),(0,s.jsx)("div",{className:b("mx-auto w-16 h-16 rounded-3xl flex items-center justify-center mb-5 transition-colors duration-300",g.iconBg),children:(0,s.jsx)(f,{size:32,strokeWidth:2})}),(0,s.jsxs)("div",{className:"mb-8 space-y-2",children:[(0,s.jsx)("h3",{className:"text-xl font-black text-slate-800 tracking-tight leading-none",children:t}),(0,s.jsx)("p",{className:"text-sm text-slate-500 font-medium leading-relaxed px-2",children:a})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)("button",{onClick:r,disabled:i,className:"py-3.5 rounded-2xl font-bold text-slate-500 bg-white border border-slate-200 hover:bg-slate-50 hover:text-slate-700 transition-colors disabled:opacity-50 text-sm",children:"Cancelar"}),(0,s.jsx)("button",{onClick:l,disabled:i,className:b("py-3.5 rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg transition-all active:scale-95 disabled:opacity-80 disabled:cursor-not-allowed text-sm",g.button),children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{className:"animate-spin",size:18}),(0,s.jsx)("span",{children:"Espere..."})]}):"Confirmar"})]})]})]})})}var y=a(4478);let j=(0,d.A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var v=a(4980),w=a(4538);let N=(0,d.A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var k=a(8459),_=a(2484);let A=(0,d.A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var C=a(5870);function z({order:e,isTrustedClient:t,processingId:a,onVerifyPayment:l,onMarkDelivered:r,onBlockUser:i,onDeleteOrder:n}){let o="delivered"===e.status,d="paid"===e.payment_status,c="yape"===e.payment_method;return(0,s.jsxs)("div",{className:`relative bg-white rounded-[2rem] p-5 shadow-sm border border-slate-100 transition-all duration-300 hover:shadow-xl hover:shadow-orange-500/5 group flex flex-col h-full ${o?"opacity-60 grayscale-[0.8]":"hover:-translate-y-1"}`,children:[(0,s.jsx)("div",{className:`absolute left-0 top-8 bottom-8 w-1 rounded-r-full transition-colors ${o?"bg-slate-200":d?"bg-emerald-400":"bg-orange-500"}`}),(0,s.jsxs)("div",{className:"flex justify-between items-start pl-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[t?(0,s.jsxs)("span",{className:"bg-emerald-50 text-emerald-700 px-2 py-0.5 rounded-lg text-[9px] font-black border border-emerald-100 uppercase tracking-wider flex items-center gap-1",children:[(0,s.jsx)(y.A,{size:10})," VIP"]}):(0,s.jsxs)("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded-lg text-[9px] font-black border border-blue-100 uppercase tracking-wider flex items-center gap-1",children:[(0,s.jsx)(j,{size:10})," Nuevo"]}),(0,s.jsxs)("span",{className:"text-[10px] font-mono text-slate-400 flex items-center gap-1",children:[(0,s.jsx)(v.A,{size:10})," ",new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,s.jsx)("h3",{className:"font-black text-slate-900 text-lg leading-tight line-clamp-1",children:e.customer_name}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs font-bold text-slate-500 mt-1",children:[(0,s.jsx)(w.A,{size:12,className:"text-orange-400"}),e.customer_office]})]}),(0,s.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-colors",title:"Bloquear",children:(0,s.jsx)(N,{size:16})}),(0,s.jsx)("button",{onClick:()=>n(),className:"p-2 text-slate-300 hover:text-orange-500 hover:bg-orange-50 rounded-xl transition-colors",title:"Borrar",children:(0,s.jsx)(k.A,{size:16})})]})]}),(0,s.jsx)("div",{className:"pl-4 space-y-3 mb-6 flex-1",children:e.items.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,s.jsx)("span",{className:"font-extrabold text-slate-700 bg-slate-50 min-w-[24px] h-6 flex items-center justify-center rounded-lg text-xs mt-0.5 border border-slate-100 shadow-sm",children:e.qty}),(0,s.jsxs)("div",{className:"leading-tight",children:[(0,s.jsx)("span",{className:"text-slate-800 font-bold block",children:e.name}),e.options&&(0,s.jsxs)("div",{className:"text-[10px] text-slate-400 font-medium mt-1 leading-relaxed pl-2 border-l-2 border-slate-100",children:[e.options.entrada&&(0,s.jsxs)("span",{className:"block mb-0.5",children:["Start: ",e.options.entrada]}),e.options.bebida&&(0,s.jsxs)("span",{className:"block",children:["Drink: ",e.options.bebida]})]})]})]},t))}),(0,s.jsxs)("div",{className:"pl-4 pt-4 border-t border-dashed border-slate-100 mt-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-end mb-4",children:[(0,s.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Monto Total"}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-2xl font-black text-slate-900 tracking-tighter",children:["S/ ",e.total_amount.toFixed(2)]}),(0,s.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"yape"===e.payment_method?"Yape":"Efectivo / Cuenta"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[d?(0,s.jsxs)("div",{className:"w-full py-3 bg-emerald-50 text-emerald-600 text-[10px] font-black rounded-2xl flex items-center justify-center gap-1.5 border border-emerald-100/50 shadow-sm",children:[(0,s.jsx)(_.A,{size:14,strokeWidth:2.5})," PAGADO"]}):c&&"verifying"===e.payment_status?(0,s.jsxs)("button",{onClick:l,className:"w-full py-3 bg-purple-600 text-white text-[10px] font-black rounded-2xl shadow-lg shadow-purple-200 hover:bg-purple-700 active:scale-95 transition-all flex flex-col items-center justify-center gap-0.5",children:[(0,s.jsx)("span",{children:"VERIFICAR"}),(0,s.jsx)("span",{className:"font-mono text-xs opacity-90 tracking-widest",children:e.operation_code})]}):"on_account"===e.payment_status?(0,s.jsx)("div",{className:"w-full py-3 bg-blue-50 text-blue-600 text-[10px] font-black rounded-2xl flex items-center justify-center border border-blue-100",children:"A CUENTA"}):(0,s.jsxs)("button",{onClick:l,className:"w-full py-3 bg-slate-900 text-white text-[10px] font-black rounded-2xl hover:bg-black active:scale-95 transition-all shadow-lg shadow-slate-900/10 flex items-center justify-center gap-2",children:[(0,s.jsx)(A,{size:14})," COBRAR"]}),o?(0,s.jsx)("div",{className:"w-full py-3 bg-slate-100 text-slate-400 text-[10px] font-black rounded-2xl flex items-center justify-center border border-slate-200",children:"ENTREGADO"}):(0,s.jsx)("button",{onClick:r,disabled:a===e.id,className:"w-full py-3 bg-orange-500 text-white text-[10px] font-black rounded-2xl shadow-lg shadow-orange-200 hover:bg-orange-600 active:scale-95 transition-all flex items-center justify-center gap-2",children:a===e.id?(0,s.jsx)(u.A,{size:14,className:"animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.A,{size:14})," DESPACHAR"]})})]})]})]})}var S=a(5772);let P=(0,d.A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),E=(0,d.A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);function M({product:e,onToggleStatus:t,onDelete:a,onEdit:l,isToggling:r}){let i=e.is_available&&(null===e.stock||e.stock>0),n=null!==e.stock&&void 0!==e.stock,o=(e=>{if(!e||"string"!=typeof e)return"https://images.unsplash.com/photo-1546069901-ba9599a7e63c";try{return new URL(e),e}catch(e){return"https://images.unsplash.com/photo-1546069901-ba9599a7e63c"}})(e.image_url);return(0,s.jsxs)("div",{className:`bg-white p-4 rounded-[1.5rem] shadow-sm border border-slate-200 flex flex-col gap-4 transition-all duration-300 hover:shadow-lg hover:shadow-orange-500/10 hover:border-orange-200 group relative overflow-hidden ${!i?"opacity-60 bg-slate-50":""}`,children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"relative w-20 h-20 shrink-0 bg-orange-50 rounded-xl overflow-hidden border border-orange-100/50",children:(0,s.jsx)(S.default,{src:o,alt:e.name||"Plato",fill:!0,className:`object-cover transition-all duration-700 ${!i?"grayscale":"group-hover:scale-105"}`,sizes:"100px"})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col justify-start py-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 text-sm leading-tight line-clamp-2 pr-2 group-hover:text-orange-600 transition-colors",children:e.name}),(0,s.jsxs)("div",{className:"flex gap-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)("button",{onClick:()=>l(e),className:"p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-all",title:"Editar producto",children:(0,s.jsx)(P,{size:16})}),(0,s.jsx)("button",{onClick:()=>a(e.id),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Eliminar producto",children:(0,s.jsx)(k.A,{size:16})})]})]}),(0,s.jsxs)("div",{className:"mt-auto pt-2 flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"font-black text-slate-900 tracking-tight",children:["S/ ",e.price?.toFixed(2)]}),(0,s.jsx)("button",{onClick:()=>t(e.id,e.is_available),disabled:r,className:`w-10 h-5 rounded-full p-1 transition-all duration-300 flex items-center shadow-inner ${e.is_available?"bg-orange-500":"bg-slate-300"}`,children:(0,s.jsx)("div",{className:`bg-white w-3 h-3 rounded-full shadow-sm flex items-center justify-center transition-all duration-300 ${e.is_available?"translate-x-5":"translate-x-0"}`,children:r&&(0,s.jsx)(u.A,{size:8,className:"animate-spin text-orange-500"})})})]})]})]}),(0,s.jsxs)("div",{className:"border-t border-slate-100 pt-3 flex items-center justify-between text-xs font-bold",children:[(0,s.jsxs)("span",{className:"text-slate-400 uppercase tracking-widest text-[9px] flex items-center gap-1",children:[(0,s.jsx)(E,{size:12})," Inventario"]}),(0,s.jsx)("span",{className:n?0===e.stock?"text-red-500":"text-orange-600":"text-emerald-600",children:n?0===e.stock?"Agotado":`Quedan ${e.stock}`:"Ilimitado"})]})]})}var D=a(1275),I=a(1362);function q({customer:e,onClick:t}){let a=e.total_debt>0;return(0,s.jsxs)("div",{onClick:t,className:"bg-white p-4 rounded-[1.5rem] shadow-sm border border-slate-100 flex items-center justify-between cursor-pointer hover:border-orange-200 hover:shadow-lg hover:shadow-orange-500/5 transition-all duration-200 active:scale-[0.99] group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-lg font-black transition-colors shadow-sm ${a?"bg-red-50 text-red-500":"bg-slate-50 text-slate-400 group-hover:bg-orange-50 group-hover:text-orange-500"}`,children:e.name.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 leading-tight group-hover:text-orange-700 transition-colors",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsx)("span",{className:"text-xs text-slate-400 font-medium bg-slate-50 px-1.5 rounded-md border border-slate-100",children:e.office}),(0,s.jsx)("span",{className:"text-[10px] text-slate-300 font-mono",children:e.phone})]}),a&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-red-600 bg-red-50 px-2 py-0.5 rounded-full mt-1.5 border border-red-100",children:[(0,s.jsx)(D.A,{size:10})," Deuda: S/ ",e.total_debt.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"text-right flex flex-col justify-center",children:[(0,s.jsx)("p",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-wider mb-0.5",children:"Total"}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1 text-slate-900",children:[(0,s.jsxs)("span",{className:"font-black text-lg tracking-tight",children:["S/ ",e.total_spent.toFixed(2)]}),(0,s.jsx)(I.A,{size:18,className:"text-slate-300 group-hover:text-orange-400 transition-colors"})]})]})]})}let T=(0,d.A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),O=(0,d.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),R=(0,d.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),F=(0,d.A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var L=a(629),B=a(2230),$=a(1878),H=a(1914),U=a(41),V=a(3415);let G=(0,d.A)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);function J(...e){return(0,g.QP)((0,h.$)(e))}function Q(){let[e,t]=(0,l.useState)("orders"),[a,d]=(0,l.useState)("today"),[c,x]=(0,l.useState)(!1),[h,g]=(0,l.useState)(!1),[b,y]=(0,l.useState)(""),[j,v]=(0,l.useState)([]),[w,N]=(0,l.useState)([]),[k,_]=(0,l.useState)([]),[A,S]=(0,l.useState)([]),[P,I]=(0,l.useState)(null),[Q,W]=(0,l.useState)(null),[Z,Y]=(0,l.useState)(null),[X,K]=(0,l.useState)(null),[ee,et]=(0,l.useState)({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"danger"}),[ea,es]=(0,l.useState)({name:"",description:"",price:"",category:"menu",image_url:"",stock:"",entradas:"",bebidas:""}),el=(0,i.useRouter)(),er=(0,l.useRef)(null),ei=(0,r.createBrowserClient)("https://qmpymxajjxlfnlfybaqt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFtcHlteGFqanhsZm5sZnliYXF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2OTI4NjIsImV4cCI6MjA4NjI2ODg2Mn0.Oo4KnFI-Y6xkeI2xbEQ8zQBE7y63ZaztwbQvbU7bgiE");(0,l.useEffect)(()=>{er.current=new Audio("https://cdn.freesound.org/previews/536/536108_1415754-lq.mp3"),(async()=>{let{data:{session:e}}=await ei.auth.getSession();e||el.push("/admin"),await en()})();let e=ei.channel("admin_dashboard_root").on("postgres_changes",{event:"*",schema:"public",table:"orders"},eo).on("postgres_changes",{event:"*",schema:"public",table:"products"},ed).subscribe();return()=>{ei.removeChannel(e)}},[]);let en=async()=>{let[e,t,a,s]=await Promise.all([ei.from("orders").select("*").order("created_at",{ascending:!1}),ei.from("products").select("*").order("created_at",{ascending:!1}),ei.from("customers").select("phone, full_name, dni"),ei.from("orders").select("customer_phone").eq("status","delivered")]);e.data&&v(e.data),t.data&&N(t.data),a.data&&_(a.data),s.data&&S([...new Set(s.data.map(e=>e.customer_phone))])},eo=e=>{"INSERT"===e.eventType?(v(t=>[e.new,...t]),er.current?.play().catch(()=>{})):"UPDATE"===e.eventType?v(t=>t.map(t=>t.id===e.new.id?{...t,...e.new}:t)):"DELETE"===e.eventType&&v(t=>t.filter(t=>t.id!==e.old.id))},ed=e=>{"INSERT"===e.eventType?N(t=>[e.new,...t]):"UPDATE"===e.eventType?N(t=>t.map(t=>t.id===e.new.id?e.new:t)):"DELETE"===e.eventType&&N(t=>t.filter(t=>t.id!==e.old.id))},ec=(0,l.useMemo)(()=>{if("all"===a)return j;let e=new Date().toDateString();return j.filter(t=>new Date(t.created_at).toDateString()===e)},[j,a]),ex=(0,l.useMemo)(()=>{let e=new Map;return j.forEach(t=>{let a=t.customer_dni||t.customer_phone;if(!e.has(a)){let s=k.find(e=>e.dni===t.customer_dni||e.phone===t.customer_phone);e.set(a,{phone:t.customer_phone,dni:t.customer_dni,name:s?s.full_name:t.customer_name,office:t.customer_office,total_debt:0,total_spent:0,orders_count:0,last_order:t.created_at,history:[]})}let s=e.get(a);s.history.push(t),s.orders_count++,s.total_spent+=t.total_amount,["on_account","unpaid"].includes(t.payment_status)&&(s.total_debt+=t.total_amount),new Date(t.created_at)>new Date(s.last_order)&&(s.last_order=t.created_at,s.phone=t.customer_phone,s.office=t.customer_office)}),Array.from(e.values()).filter(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.phone.includes(b)||e.dni&&e.dni.includes(b)).sort((e,t)=>t.total_debt-e.total_debt)},[j,k,b]),em=(e,t,a,s="danger")=>{et({isOpen:!0,title:e,message:t,type:s,onConfirm:async()=>{g(!0),await a(),g(!1),et(e=>({...e,isOpen:!1}))}})},ep=async e=>{v(t=>t.map(t=>t.id===e?{...t,payment_status:"paid"}:t)),await ei.from("orders").update({payment_status:"paid"}).eq("id",e)},eu=async e=>{W(e),await ei.from("orders").update({status:"delivered"}).eq("id",e),W(null)},eh=async e=>{await ei.from("orders").delete().eq("id",e)},eg=async e=>{await ei.from("customers").update({is_blacklisted:!0}).eq("phone",e)},eb=async(e,t)=>{Y(e),await ei.from("products").update({is_available:!t}).eq("id",e),Y(null)},ef=async e=>{await ei.from("products").delete().eq("id",e)},ey=async e=>{let t=e.history.filter(e=>["on_account","unpaid"].includes(e.payment_status)).map(e=>e.id);t.length&&(await ei.from("orders").update({payment_status:"paid",payment_method:"cash_collected"}).in("id",t),v(e=>e.map(e=>t.includes(e.id)?{...e,payment_status:"paid"}:e))),I(null)},ej=async e=>{e.preventDefault(),g(!0);try{let e=""===ea.stock||null===ea.stock?null:parseInt(ea.stock),t=parseFloat(ea.price);if(isNaN(t))throw Error("Precio inv\xe1lido");let a={entradas:ea.entradas.split(",").map(e=>e.trim()).filter(Boolean),bebidas:ea.bebidas.split(",").map(e=>e.trim()).filter(Boolean)},s={name:ea.name,description:ea.description,price:t,category:ea.category,image_url:ea.image_url,stock:e,options:a,is_available:!0};if(X){let{error:e}=await ei.from("products").update(s).eq("id",X);if(e)throw e}else{let{error:e}=await ei.from("products").insert([s]);if(e)throw e}x(!1),K(null),es({name:"",description:"",price:"",category:"menu",image_url:"",stock:"",entradas:"",bebidas:""})}catch(e){console.error("Error al guardar:",e),alert("Ocurri\xf3 un error al guardar el producto.")}finally{g(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-[#F8F9FA] pb-32 text-slate-800 font-sans selection:bg-orange-100",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-40 px-4 py-3 bg-white/90 backdrop-blur-xl border-b border-slate-200/60 shadow-sm flex items-center justify-between transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center bg-orange-600 text-white h-10 w-10 rounded-xl shadow-lg shadow-orange-500/30",children:(0,s.jsx)(C.A,{size:22,strokeWidth:2.5})}),(0,s.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,s.jsxs)("h1",{className:"font-black tracking-tighter text-slate-900 leading-none text-lg",children:["D' Irma ",(0,s.jsx)("span",{className:"text-orange-600",children:"Admin"})]}),(0,s.jsx)("p",{className:"font-bold text-[9px] text-slate-400 uppercase tracking-[0.2em] mt-0.5",children:"Panel de Control"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"p-2.5 text-slate-400 hover:text-slate-900 hover:bg-slate-100 rounded-full transition-colors active:scale-95",children:(0,s.jsx)(T,{size:18,strokeWidth:2.5})}),(0,s.jsx)("button",{onClick:()=>em("Cerrar Sesi\xf3n","\xbfSalir del sistema?",async()=>{await ei.auth.signOut(),el.push("/admin")},"info"),className:"p-2.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors active:scale-95",children:(0,s.jsx)(O,{size:18,strokeWidth:2.5})})]})]}),(0,s.jsxs)("main",{className:"px-4 md:px-8 mt-6 max-w-[1400px] mx-auto space-y-8",children:[(0,s.jsx)("div",{className:"flex p-1.5 bg-white rounded-[1.25rem] w-full md:w-fit mx-auto overflow-x-auto no-scrollbar border border-slate-200 shadow-sm",children:[{id:"orders",label:"Monitor en Vivo",icon:R},{id:"customers",label:"Directorio",icon:F},{id:"menu",label:"Cat\xe1logo",icon:L.A}].map(a=>(0,s.jsxs)("button",{onClick:()=>t(a.id),className:J("relative px-6 py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all duration-300 min-w-max",e===a.id?"text-white shadow-md shadow-orange-500/20":"text-slate-500 hover:text-slate-800 hover:bg-slate-50"),children:[e===a.id&&(0,s.jsx)(n.P.div,{layoutId:"adminTab",className:"absolute inset-0 bg-orange-600 rounded-xl -z-10",transition:{type:"spring",stiffness:400,damping:30}}),(0,s.jsx)(a.icon,{size:16,strokeWidth:2.5})," ",a.label]},a.id))}),"orders"===e&&(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-white p-4 rounded-2xl border border-slate-200 shadow-sm gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg",children:(0,s.jsx)(m.A,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-black text-slate-800 tracking-tight",children:"Centro de Recepci\xf3n"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Gestiona y cobra los pedidos al instante."})]})]}),(0,s.jsxs)("div",{className:"flex bg-slate-100 p-1 rounded-lg border border-slate-200 w-full sm:w-auto",children:[(0,s.jsxs)("button",{onClick:()=>d("today"),className:J("flex-1 sm:flex-none px-4 py-1.5 rounded-md text-xs font-bold transition-all","today"===a?"bg-white text-slate-800 shadow-sm":"text-slate-500"),children:["Solo Hoy (",j.filter(e=>new Date(e.created_at).toDateString()===new Date().toDateString()).length,")"]}),(0,s.jsx)("button",{onClick:()=>d("all"),className:J("flex-1 sm:flex-none px-4 py-1.5 rounded-md text-xs font-bold transition-all","all"===a?"bg-white text-slate-800 shadow-sm":"text-slate-500"),children:"Historial Total"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:(0,s.jsxs)(o.N,{mode:"popLayout",children:[0===ec.length&&(0,s.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-full py-24 text-center text-slate-400",children:[(0,s.jsx)(B.A,{size:48,className:"mx-auto mb-4 opacity-20"}),(0,s.jsx)("p",{className:"font-bold tracking-tight text-lg",children:"today"===a?"A\xfan no hay pedidos hoy.":"No hay historial."})]}),ec.map(e=>(0,s.jsx)(n.P.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,s.jsx)(z,{order:e,isTrustedClient:A.includes(e.customer_phone),processingId:Q,onVerifyPayment:()=>em("Pago Recibido",`\xbfConfirmar S/ ${e.total_amount.toFixed(2)}?`,async()=>ep(e.id),"info"),onMarkDelivered:()=>eu(e.id),onBlockUser:()=>em("Bloquear","El usuario no podr\xe1 pedir m\xe1s.",async()=>eg(e.customer_phone)),onDeleteOrder:()=>em("Eliminar","Esta acci\xf3n es irreversible.",async()=>eh(e.id))})},e.id))]})})]}),"customers"===e&&(0,s.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("input",{placeholder:"Buscar por nombre, DNI o celular...",className:"w-full p-4 pl-12 bg-white rounded-2xl shadow-sm border border-slate-200 outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-500/10 transition-all text-sm font-bold text-slate-800 placeholder:text-slate-400",value:b,onChange:e=>y(e.target.value)}),(0,s.jsx)($.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-orange-500 transition-colors",size:20})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ex.map(e=>(0,s.jsx)(q,{customer:e,onClick:()=>I(e)},e.phone))})]}),"menu"===e&&(0,s.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-10",children:[(0,s.jsxs)("button",{onClick:()=>{K(null),es({name:"",description:"",price:"",category:"menu",image_url:"",stock:"",entradas:"",bebidas:""}),x(!0)},className:"w-full bg-orange-50 border-2 border-dashed border-orange-200 hover:border-orange-500 p-8 rounded-[2rem] flex flex-col items-center justify-center gap-3 text-orange-600 hover:bg-orange-100 transition-all group",children:[(0,s.jsx)("div",{className:"bg-white group-hover:bg-orange-600 group-hover:text-white text-orange-500 p-4 rounded-full shadow-sm transition-colors",children:(0,s.jsx)(H.A,{size:24,strokeWidth:2.5})}),(0,s.jsx)("span",{className:"font-black text-sm tracking-widest uppercase drop-shadow-sm",children:"Crear Nuevo Producto"})]}),[{id:"menu",title:"Men\xfa Ejecutivo",icon:C.A,color:"bg-orange-500"},{id:"plato",title:"Platos a la Carta",icon:U.A,color:"bg-red-500"},{id:"diet",title:"Dietas Saludables",icon:V.A,color:"bg-green-500"},{id:"adicional",title:"Adicionales",icon:B.A,color:"bg-yellow-500"}].map(e=>{let t=w.filter(t=>t.category===e.id);return t.length?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6 pl-1 border-b border-slate-200 pb-3",children:[(0,s.jsx)("div",{className:J("p-2 rounded-xl text-white shadow-sm",e.color),children:(0,s.jsx)(e.icon,{size:20})}),(0,s.jsx)("h3",{className:"text-xl font-black text-slate-800 tracking-tight",children:e.title})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-5",children:t.map(e=>(0,s.jsx)(M,{product:e,onToggleStatus:eb,onDelete:e=>em("Borrar Producto","\xbfEst\xe1s seguro de eliminar este \xedtem permanentemente?",async()=>ef(e)),onEdit:e=>{K(e.id),es({name:e.name,description:e.description||"",price:e.price.toString(),category:e.category,image_url:e.image_url||"",stock:null===e.stock?"":e.stock.toString(),entradas:e.options?.entradas?.join(", ")||"",bebidas:e.options?.bebidas?.join(", ")||""}),x(!0)},isToggling:Z===e.id},e.id))})]},e.id):null})]})]}),(0,s.jsx)(o.N,{children:c&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 isolate overflow-hidden",children:[(0,s.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>x(!1),className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),(0,s.jsxs)(n.P.div,{initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-white w-full max-w-lg rounded-[2.5rem] p-8 shadow-2xl shadow-black/10 ring-1 ring-slate-100 max-h-[90vh] overflow-y-auto custom-scrollbar",children:[(0,s.jsxs)("h2",{className:"text-2xl font-black text-slate-900 mb-6 tracking-tight flex items-center gap-2",children:[(0,s.jsx)(C.A,{className:"text-orange-500"})," ",X?"Editar Plato":"Nuevo Plato"]}),(0,s.jsxs)("form",{onSubmit:ej,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 mb-1 block",children:"Nombre"}),(0,s.jsx)("input",{required:!0,placeholder:"Ej: Arroz con Pato",value:ea.name,onChange:e=>es({...ea,name:e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none text-sm font-bold text-slate-900 transition-all"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 mb-1 block",children:"Precio (S/)"}),(0,s.jsx)("input",{type:"number",step:"0.1",required:!0,placeholder:"0.00",value:ea.price,onChange:e=>es({...ea,price:e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none text-sm font-black text-slate-900 transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 mb-1 block",children:"Categor\xeda"}),(0,s.jsxs)("select",{value:ea.category,onChange:e=>es({...ea,category:e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none text-sm font-bold text-slate-900 transition-all cursor-pointer",children:[(0,s.jsx)("option",{value:"menu",children:"Men\xfa Ejecutivo"}),(0,s.jsx)("option",{value:"menu",children:"Men\xfa Ejecutivo"}),(0,s.jsx)("option",{value:"plato",children:"A la Carta"}),(0,s.jsx)("option",{value:"diet",children:"Dieta"}),(0,s.jsx)("option",{value:"adicional",children:"Adicional / Extra"})," "]})]})]}),["menu","diet"].includes(ea.category)&&(0,s.jsxs)(n.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-4 bg-orange-50/50 rounded-2xl border border-orange-100 space-y-3",children:[(0,s.jsxs)("h4",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest flex items-center gap-1.5",children:[(0,s.jsx)(G,{size:12})," Configurar Opciones (Opcional)"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{placeholder:"Entradas (ej: Sopa, Ensalada Rusa)",value:ea.entradas,onChange:e=>es({...ea,entradas:e.target.value}),className:"w-full px-3 py-2 bg-white border border-orange-200 rounded-lg text-xs font-medium text-slate-700 outline-none focus:border-orange-500"}),(0,s.jsx)("p",{className:"text-[9px] text-orange-400/80 mt-1 ml-1",children:"Sep\xe1ralas con una coma (,)"})]}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{placeholder:"Bebidas (ej: Chicha, Maracuy\xe1)",value:ea.bebidas,onChange:e=>es({...ea,bebidas:e.target.value}),className:"w-full px-3 py-2 bg-white border border-orange-200 rounded-lg text-xs font-medium text-slate-700 outline-none focus:border-orange-500"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 mb-1",children:[(0,s.jsx)(E,{size:12,className:"text-orange-500"})," L\xedmite de Platos"]}),(0,s.jsx)("input",{type:"number",min:"0",placeholder:"Dejar vac\xedo si es ilimitado",value:ea.stock,onChange:e=>es({...ea,stock:e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none text-sm font-bold text-slate-900 transition-all placeholder:text-slate-400"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 mb-1 block",children:"Descripci\xf3n (Opcional)"}),(0,s.jsx)("textarea",{placeholder:"Ingredientes...",value:ea.description,onChange:e=>es({...ea,description:e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none text-sm font-medium text-slate-700 transition-all resize-none h-16"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 mb-1 block",children:"Imagen URL"}),(0,s.jsx)("input",{placeholder:"https://...",value:ea.image_url,onChange:e=>es({...ea,image_url:e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none text-xs font-mono text-slate-500 transition-all"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>x(!1),className:"flex-1 py-4 rounded-xl font-bold text-slate-500 bg-slate-100 hover:bg-slate-200 transition-colors",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",disabled:h,className:"flex-1 bg-orange-600 text-white rounded-xl font-bold py-4 hover:bg-orange-700 transition-all active:scale-95 disabled:opacity-70 flex items-center justify-center gap-2 shadow-lg shadow-orange-500/30",children:h?(0,s.jsx)(u.A,{className:"animate-spin",size:18}):X?"Guardar Cambios":"Crear Plato"})]})]})]})]})}),(0,s.jsx)(o.N,{children:P&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center p-4 isolate",children:[(0,s.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>I(null),className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),(0,s.jsxs)(n.P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-white w-full max-w-lg rounded-t-[2.5rem] sm:rounded-[2.5rem] p-0 shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,s.jsxs)("div",{className:"p-6 bg-slate-50 border-b border-slate-100 flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-black text-slate-900 leading-tight",children:P.name}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 mt-2",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs font-bold text-slate-500 bg-white px-2 py-1 rounded-md border border-slate-200 w-fit",children:[(0,s.jsx)(F,{size:12})," ",P.office]}),(0,s.jsxs)("span",{className:"text-xs font-mono text-slate-400",children:[P.phone," ",P.dni?`• DNI: ${P.dni}`:""]})]})]}),(0,s.jsx)("button",{onClick:()=>I(null),className:"p-2 bg-white border border-slate-200 rounded-full hover:bg-slate-100 transition-colors",children:(0,s.jsx)(p.A,{size:20,className:"text-slate-400"})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[(0,s.jsxs)("div",{className:`p-6 rounded-3xl mb-8 text-center relative overflow-hidden ${P.total_debt>0?"bg-red-50 border border-red-100":"bg-emerald-50 border border-emerald-100"}`,children:[(0,s.jsx)("p",{className:`text-[10px] font-black uppercase tracking-[0.2em] ${P.total_debt>0?"text-red-400":"text-emerald-500"}`,children:P.total_debt>0?"Deuda Pendiente":"Estado de Cuenta"}),(0,s.jsxs)("p",{className:`text-5xl font-black mt-2 tracking-tighter ${P.total_debt>0?"text-red-600":"text-emerald-600"}`,children:["S/ ",P.total_debt.toFixed(2)]}),P.total_debt>0?(0,s.jsxs)("button",{onClick:()=>em("Cobrar Deuda",`\xbfConfirmar pago total de S/ ${P.total_debt.toFixed(2)}?`,async()=>ey(P),"info"),className:"mt-6 w-full bg-red-600 hover:bg-red-700 text-white py-3.5 rounded-2xl font-bold shadow-lg shadow-red-500/30 flex items-center justify-center gap-2 transition-all active:scale-95",children:[(0,s.jsx)(D.A,{size:18})," REGISTRAR PAGO TOTAL"]}):(0,s.jsxs)("div",{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-sm text-emerald-700 text-xs font-bold",children:[(0,s.jsx)(m.A,{size:14})," Cliente al d\xeda"]})]}),(0,s.jsx)("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4 px-2",children:"Historial Reciente"}),(0,s.jsx)("div",{className:"space-y-3",children:P.history.slice().reverse().map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white rounded-2xl border border-slate-100 shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:[new Date(e.created_at).toLocaleDateString()," •"," ",new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,s.jsxs)("p",{className:"font-bold text-slate-700 mt-0.5",children:[e.items.length," items"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-black text-slate-900",children:["S/ ",e.total_amount.toFixed(2)]}),(0,s.jsx)("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded ${"paid"===e.payment_status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:"paid"===e.payment_status?"Pagado":"Deuda"})]})]},e.id))})]})]})]})}),(0,s.jsx)(f,{isOpen:ee.isOpen,title:ee.title,message:ee.message,onConfirm:ee.onConfirm,onCancel:()=>et(e=>({...e,isOpen:!1})),isLoading:h,type:ee.type})]})}},1878:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2806).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},2484:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2806).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3321:(e,t,a)=>{"use strict";var s=a(4645);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},4501:(e,t,a)=>{Promise.resolve().then(a.bind(a,574))},4980:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2806).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{e.O(0,[525,416,39,21,441,928,358],()=>e(e.s=4501)),_N_E=e.O()}]);