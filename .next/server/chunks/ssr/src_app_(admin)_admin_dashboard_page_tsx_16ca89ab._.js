module.exports=[63056,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35025);var d=a.i(9701),e=a.i(50944),f=a.i(70106);let g=(0,f.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),h=(0,f.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var i=a.i(24987);let j=(0,f.default)("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);var k=a.i(15618);let l=(0,f.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),m=(0,f.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var n=a.i(33508);let o=(0,f.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),p=(0,f.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),q=(0,f.default)("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),r=(0,f.default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var s=a.i(96221),t=a.i(81560),u=a.i(61580);function v(){let[a,f]=(0,c.useState)("orders"),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)({name:"",description:"",price:"",category:"menu",image_url:""}),F=(0,e.useRouter)(),G=(0,d.createBrowserClient)("https://qmpymxajjxlfnlfybaqt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFtcHlteGFqanhsZm5sZnliYXF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2OTI4NjIsImV4cCI6MjA4NjI2ODg2Mn0.Oo4KnFI-Y6xkeI2xbEQ8zQBE7y63ZaztwbQvbU7bgiE"),H=async()=>{window.confirm("Â¿Cerrar sesiÃ³n de cocina?")&&(await G.auth.signOut(),F.push("/admin"))};(0,c.useEffect)(()=>{(async()=>{let{data:{session:a}}=await G.auth.getSession();a||F.push("/admin")})(),I(),J();let a=G.channel("orders_realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},a=>{w(b=>[a.new,...b]),new Audio("https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3").play().catch(()=>{})}).subscribe();return()=>{G.removeChannel(a)}},[]);let I=async()=>{let{data:a}=await G.from("orders").select("*").order("created_at",{ascending:!1});a&&w(a)},J=async()=>{let{data:a}=await G.from("products").select("*").order("created_at",{ascending:!1});a&&y(a)},K=async a=>{a.preventDefault(),C(!0);let{data:b,error:c}=await G.from("products").insert([{name:D.name,description:D.description,price:parseFloat(D.price),category:D.category,image_url:D.image_url||null,is_available:!0}]).select().single();c?alert("Error: "+c.message):(y([b,...x]),A(!1),E({name:"",description:"",price:"",category:"menu",image_url:""})),C(!1)},L=async(a,b)=>{y(x.map(c=>c.id===a?{...c,is_available:!b}:c)),await G.from("products").update({is_available:!b}).eq("id",a)},M=async a=>{confirm("Â¿Borrar este plato?")&&(y(x.filter(b=>b.id!==a)),await G.from("products").delete().eq("id",a))},N=async a=>{w(v.map(b=>b.id===a?{...b,status:"delivered"}:b)),await G.from("orders").update({status:"delivered"}).eq("id",a)};return(0,b.jsxs)("div",{className:"min-h-screen bg-[#F8F9FA] pb-32 font-sans text-gray-900",children:[(0,b.jsxs)("div",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur-xl border-b border-gray-200 px-4 sm:px-8 py-4 flex items-center justify-between shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-orange-500 p-2 rounded-xl text-white shadow-md shadow-orange-200",children:(0,b.jsx)(u.ChefHat,{size:22,strokeWidth:2.5})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"font-black text-lg tracking-tight text-gray-900 leading-none",children:"D' Irma"}),(0,b.jsx)("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest mt-0.5",children:"Admin"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>window.location.reload(),className:"p-3 text-gray-500 hover:text-gray-900 hover:bg-gray-100 rounded-xl transition-all active:scale-95",title:"Actualizar",children:(0,b.jsx)(l,{size:20})}),(0,b.jsx)("button",{onClick:H,className:"p-3 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all active:scale-95",title:"Salir",children:(0,b.jsx)(m,{size:20})})]})]}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 mt-6",children:(0,b.jsxs)("div",{className:"flex p-1.5 bg-white rounded-2xl shadow-sm border border-gray-200 max-w-md mx-auto sm:mx-0",children:[(0,b.jsxs)("button",{onClick:()=>f("orders"),className:`flex-1 py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all duration-200 ${"orders"===a?"bg-orange-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:[(0,b.jsx)(g,{size:18,className:"orders"===a?"fill-white":""}),"Pedidos",v.filter(a=>"delivered"!==a.status).length>0&&(0,b.jsx)("span",{className:"bg-white text-orange-600 text-xs px-2 py-0.5 rounded-full font-black shadow-sm",children:v.filter(a=>"delivered"!==a.status).length})]}),(0,b.jsxs)("button",{onClick:()=>f("menu"),className:`flex-1 py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all duration-200 ${"menu"===a?"bg-orange-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:[(0,b.jsx)(j,{size:18,className:"menu"===a?"fill-white":""}),"MenÃº"]})]})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 mt-6",children:["orders"===a&&(0,b.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[0===v.length&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-32 opacity-50",children:[(0,b.jsx)("div",{className:"bg-gray-200 p-6 rounded-full mb-4 text-gray-400",children:(0,b.jsx)(g,{size:48})}),(0,b.jsx)("p",{className:"font-bold text-gray-500 text-xl",children:"Sin pedidos pendientes"}),(0,b.jsx)("p",{className:"text-gray-400",children:"La cocina estÃ¡ tranquila ðŸ§˜â€â™‚ï¸"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:v.map(a=>(0,b.jsxs)("div",{className:`bg-white rounded-[20px] p-6 shadow-sm border border-gray-100 flex flex-col justify-between transition-all hover:shadow-lg ${"delivered"===a.status?"opacity-60 grayscale bg-gray-50":"border-l-4 border-l-orange-500"}`,children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-black text-xl text-gray-900 leading-tight",children:a.customer_name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 font-medium mt-1",children:[(0,b.jsx)("div",{className:"bg-orange-50 p-1 rounded text-orange-600",children:(0,b.jsx)(i.MapPin,{size:14})}),a.customer_office]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)("span",{className:"text-xs font-bold text-gray-400 bg-gray-100 px-2 py-1 rounded-lg",children:new Date(a.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})})]}),(0,b.jsx)("div",{className:"space-y-3 mb-6 max-h-[200px] overflow-y-auto custom-scrollbar pr-2",children:a.items.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-3 text-sm items-start border-b border-dashed border-gray-100 pb-2 last:border-0",children:[(0,b.jsxs)("span",{className:"font-bold text-xs bg-gray-900 text-white px-2 py-1 rounded-md min-w-[28px] text-center shadow-sm",children:[a.qty,"x"]}),(0,b.jsx)("span",{className:"text-gray-700 font-medium leading-tight pt-0.5",children:a.name})]},c))})]}),(0,b.jsxs)("div",{className:"mt-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4 bg-gray-50 p-3 rounded-xl",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider",children:"Total"}),(0,b.jsxs)("span",{className:"text-2xl font-black text-gray-900",children:["S/ ",a.total_amount]})]}),(0,b.jsx)("div",{className:`text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wide flex items-center gap-2 border bg-white ${"yape"===a.payment_method?"text-purple-600 border-purple-100":"text-green-600 border-green-100"}`,children:"yape"===a.payment_method?"ðŸ“± Yape":"ðŸ’µ Efectivo"})]}),"delivered"!==a.status?(0,b.jsxs)("button",{onClick:()=>N(a.id),className:"w-full bg-[#10B981] text-white py-4 rounded-xl font-bold text-sm flex items-center justify-center gap-2 active:scale-95 transition-all shadow-lg shadow-green-100 hover:bg-[#059669]",children:[(0,b.jsx)(h,{size:20})," MARCAR ENTREGADO"]}):(0,b.jsxs)("div",{className:"w-full bg-gray-100 text-gray-400 py-3 rounded-xl font-bold text-xs uppercase flex items-center justify-center gap-2 border border-gray-200",children:[(0,b.jsx)(h,{size:16})," Pedido Completado"]})]})]},a.id))})]}),"menu"===a&&(0,b.jsx)("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[(0,b.jsxs)("button",{onClick:()=>A(!0),className:"group min-h-[160px] border-2 border-dashed border-orange-300 bg-orange-50/50 rounded-[20px] flex flex-col items-center justify-center gap-3 hover:bg-orange-50 hover:border-orange-500 transition-all active:scale-95",children:[(0,b.jsx)("div",{className:"bg-orange-100 p-4 rounded-full text-orange-600 group-hover:bg-orange-500 group-hover:text-white transition-colors shadow-sm",children:(0,b.jsx)(k.Plus,{size:32})}),(0,b.jsx)("span",{className:"font-bold text-orange-800 text-lg",children:"Agregar Plato"})]}),x.map(a=>(0,b.jsxs)("div",{className:`bg-white p-4 rounded-[20px] shadow-sm border border-gray-100 flex items-center gap-5 transition-all hover:shadow-md ${!a.is_available&&"opacity-60 bg-gray-50"}`,children:[(0,b.jsx)("div",{className:"relative w-24 h-24 shrink-0 bg-gray-100 rounded-2xl overflow-hidden shadow-inner",children:(0,b.jsx)("img",{src:a.image_url||"https://images.unsplash.com/photo-1546069901-ba9599a7e63c",alt:a.name,className:`w-full h-full object-cover ${!a.is_available&&"grayscale"}`})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0 py-1",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("h3",{className:`font-bold text-lg text-gray-900 leading-tight truncate pr-2 ${!a.is_available&&"line-through text-gray-400"}`,children:a.name}),(0,b.jsx)("button",{onClick:()=>M(a.id),className:"text-gray-300 hover:text-red-500 p-2 -mr-2 rounded-full hover:bg-red-50 transition-colors",children:(0,b.jsx)(t.Trash2,{size:18})})]}),(0,b.jsxs)("p",{className:"text-lg font-black text-gray-900 mt-1",children:["S/ ",a.price]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,b.jsx)("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-1 rounded-lg uppercase font-bold tracking-wider",children:a.category}),(0,b.jsx)("button",{onClick:()=>L(a.id,a.is_available),className:`w-14 h-8 rounded-full p-1 transition-all duration-300 relative shadow-inner ${a.is_available?"bg-green-500":"bg-gray-300"}`,children:(0,b.jsx)("div",{className:`w-6 h-6 bg-white rounded-full shadow-md transition-transform duration-300 ${a.is_available?"translate-x-6":"translate-x-0"}`})})]})]})]},a.id))]})})]}),z&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm transition-opacity",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-lg rounded-3xl p-8 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8 border-b border-gray-100 pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"Nuevo Plato"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Completa los detalles del menÃº"})]}),(0,b.jsx)("button",{onClick:()=>A(!1),className:"p-2 bg-gray-50 rounded-full hover:bg-gray-100 transition-colors text-gray-500",children:(0,b.jsx)(n.X,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:K,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Nombre del Plato"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(j,{className:"absolute left-4 top-4 text-gray-400 group-focus-within:text-orange-500 transition-colors",size:20}),(0,b.jsx)("input",{required:!0,value:D.name,onChange:a=>E({...D,name:a.target.value}),placeholder:"Ej: Arroz con Pato",className:"w-full pl-12 p-4 bg-gray-50 border-2 border-transparent focus:bg-white focus:border-orange-500 rounded-2xl font-bold text-gray-900 outline-none transition-all text-lg placeholder:text-gray-400"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Ingredientes"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(q,{className:"absolute left-4 top-4 text-gray-400 group-focus-within:text-orange-500 transition-colors",size:20}),(0,b.jsx)("input",{value:D.description,onChange:a=>E({...D,description:a.target.value}),placeholder:"Arroz + Pato + Sarsa",className:"w-full pl-12 p-4 bg-gray-50 border-2 border-transparent focus:bg-white focus:border-orange-500 rounded-2xl font-medium text-gray-900 outline-none transition-all"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Precio"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(p,{className:"absolute left-4 top-4 text-gray-400 group-focus-within:text-orange-500 transition-colors",size:20}),(0,b.jsx)("input",{required:!0,type:"number",step:"0.10",value:D.price,onChange:a=>E({...D,price:a.target.value}),placeholder:"0.00",className:"w-full pl-12 p-4 bg-gray-50 border-2 border-transparent focus:bg-white focus:border-orange-500 rounded-2xl font-bold text-gray-900 outline-none transition-all"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"CategorÃ­a"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(r,{className:"absolute left-4 top-4 text-gray-400 group-focus-within:text-orange-500 transition-colors",size:20}),(0,b.jsxs)("select",{value:D.category,onChange:a=>E({...D,category:a.target.value}),className:"w-full pl-12 p-4 bg-gray-50 border-2 border-transparent focus:bg-white focus:border-orange-500 rounded-2xl font-bold text-gray-900 outline-none appearance-none cursor-pointer",children:[(0,b.jsx)("option",{value:"menu",children:"MenÃº"}),(0,b.jsx)("option",{value:"diet",children:"Dieta"}),(0,b.jsx)("option",{value:"extra",children:"Extra"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Foto URL"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(o,{className:"absolute left-4 top-4 text-gray-400",size:18}),(0,b.jsx)("input",{value:D.image_url,onChange:a=>E({...D,image_url:a.target.value}),placeholder:"https://...",className:"w-full pl-12 p-4 bg-gray-50 border-2 border-transparent focus:bg-white focus:border-orange-500 rounded-2xl font-medium text-gray-900 outline-none transition-all text-sm"})]})]}),(0,b.jsx)("button",{type:"submit",disabled:B,className:"w-full bg-orange-500 text-white py-5 rounded-2xl font-black text-lg shadow-xl shadow-orange-200 flex items-center justify-center gap-3 mt-4 hover:bg-orange-600 active:scale-95 transition-all disabled:opacity-50",children:B?(0,b.jsx)(s.Loader2,{className:"animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Plus,{size:24})," GUARDAR PLATO"]})})]})]})})]})}a.s(["default",()=>v],63056)}];

//# sourceMappingURL=src_app_%28admin%29_admin_dashboard_page_tsx_16ca89ab._.js.map